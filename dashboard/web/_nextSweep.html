<template id="nextSweep">
  <div class="flex justify-between">
    <p>Round ID:</p>
    <p id="sweepRoundId" class="txid"></p>
  </div>
  <div class="flex justify-between">
    <p>When:</p>
    <p id="sweepWhen"></p>
  </div>
  <div class="flex justify-between">
    <p>Amount:</p>
    <p id="sweepAmount"></p>
  </div>
  <details>
    <summary>Outputs</summary>
    <div id="sweepOutputs"></div>
  </details>
</template>

<template id="sweepOutput">
  <div class="flex justify-between mt-2">
    <p class="outpoint"></p>
    <p class="satvalue"></p>
  </div>
</template>

<div class="border border-gray-300 w-full p-4">
  <h2 class="text-lg font-semibold mb-4">Next Sweep</h2>
  <div class="flex flex-col gap-2" id="nextSweepContainer"></div>
</div>

<script>
  window.addEventListener('load', (event) => {
    let amount = 0
    const container = document.querySelector('#nextSweepContainer')
    const sweepOutput = document.querySelector('#sweepOutput')
    const clone = document.querySelector('#nextSweep').content.cloneNode(true)
    clone.querySelector('#sweepRoundId').innerHTML = prettyHash(mockData.sweep.roundId)
    clone.querySelector('#sweepWhen').innerText = 'in ' + prettyTime(mockData.sweep.timestamp)
    mockData.sweep.outputs.map(({ txid, vout, sats }) => {
      amount += sats
      const c = document.querySelector('#sweepOutput').content.cloneNode(true)
      c.querySelector('.outpoint').innerText = prettyLongText(`${txid}:${vout}`)
      c.querySelector('.satvalue').innerHTML = prettySats(sats)
      clone.querySelector('#sweepOutputs').appendChild(c)
    })
    clone.querySelector('#sweepAmount').innerHTML = prettySats(amount)

    container.appendChild(clone)
  })
</script>
