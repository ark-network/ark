{
  "swagger": "2.0",
  "info": {
    "title": "ark/v1/service.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "ArkService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/batch/registerIntent": {
      "post": {
        "operationId": "ArkService_RegisterIntent",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1RegisterIntentResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1RegisterIntentRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/batch/registerOutputs": {
      "post": {
        "operationId": "ArkService_RegisterBlindedOutputs",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1RegisterBlindedOutputsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1RegisterBlindedOutputsRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/batch/submitForfeitTxs": {
      "post": {
        "operationId": "ArkService_SubmitSignedForfeitTxs",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1SubmitSignedForfeitTxsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1SubmitSignedForfeitTxsRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/batch/tree/submitNonces": {
      "post": {
        "operationId": "ArkService_SubmitTreeNonces",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1SubmitTreeNoncesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1SubmitTreeNoncesRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/batch/tree/submitSignatures": {
      "post": {
        "operationId": "ArkService_SubmitTreeSignatures",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1SubmitTreeSignaturesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1SubmitTreeSignaturesRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/batch/{batchId}/events": {
      "get": {
        "operationId": "ArkService_GetBatchEventStream",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1GetBatchEventStreamResponse"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1GetBatchEventStreamResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "batchId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "topics",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/batch/{intentId}/ack": {
      "post": {
        "operationId": "ArkService_ConfirmRegistration",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ConfirmRegistrationResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "intentId",
            "description": "The id returne dby the server when registering the intent.",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/info": {
      "get": {
        "operationId": "ArkService_GetInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/submitCheckpointTxs": {
      "post": {
        "operationId": "ArkService_SubmitCheckpointTxs",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1SubmitCheckpointTxsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1SubmitCheckpointTxsRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    },
    "/v1/submitTx": {
      "post": {
        "operationId": "ArkService_SubmitTx",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1SubmitTxResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1SubmitTxRequest"
            }
          }
        ],
        "tags": [
          "ArkService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1BatchConnectorTreeEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "topic": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "connectorTx": {
          "$ref": "#/definitions/v1Node"
        }
      }
    },
    "v1BatchFailedEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "reason": {
          "type": "string"
        }
      }
    },
    "v1BatchFinalizationEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "commitmentTx": {
          "type": "string"
        },
        "forfeitAddress": {
          "type": "string"
        }
      }
    },
    "v1BatchFinalizedEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "commitmentTxid": {
          "type": "string"
        }
      }
    },
    "v1BatchStartedEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "intentIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "batchExpiry": {
          "type": "string",
          "format": "int64"
        },
        "forfeitAddress": {
          "type": "string"
        }
      }
    },
    "v1BatchVtxoTreeEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "topic": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "treeTx": {
          "$ref": "#/definitions/v1Node"
        }
      }
    },
    "v1Bip322Signature": {
      "type": "object",
      "properties": {
        "signature": {
          "type": "string"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "v1ConfirmRegistrationResponse": {
      "type": "object",
      "properties": {
        "blindedCred": {
          "type": "string"
        }
      }
    },
    "v1GetBatchEventStreamResponse": {
      "type": "object",
      "properties": {
        "batchStarted": {
          "$ref": "#/definitions/v1BatchStartedEvent"
        },
        "treeTx": {
          "$ref": "#/definitions/v1BatchVtxoTreeEvent"
        },
        "connectorTx": {
          "$ref": "#/definitions/v1BatchConnectorTreeEvent"
        },
        "batchFinalization": {
          "$ref": "#/definitions/v1BatchFinalizationEvent"
        },
        "batchFinalized": {
          "$ref": "#/definitions/v1BatchFinalizedEvent"
        },
        "batchFailed": {
          "$ref": "#/definitions/v1BatchFailedEvent"
        },
        "treeSigningStarted": {
          "$ref": "#/definitions/v1TreeSigningStartedEvent"
        },
        "treeNoncesAggregated": {
          "$ref": "#/definitions/v1TreeNoncesAggregatedEvent"
        }
      }
    },
    "v1GetInfoResponse": {
      "type": "object",
      "properties": {
        "pubkey": {
          "type": "string"
        },
        "batchExpiry": {
          "type": "string",
          "format": "int64"
        },
        "unilateralExitDelay": {
          "type": "string",
          "format": "int64"
        },
        "roundInterval": {
          "type": "string",
          "format": "int64"
        },
        "network": {
          "type": "string"
        },
        "dust": {
          "type": "string",
          "format": "int64"
        },
        "boardingTemplate": {
          "type": "string"
        },
        "marketHour": {
          "$ref": "#/definitions/v1MarketHour"
        },
        "version": {
          "type": "string"
        }
      }
    },
    "v1MarketHour": {
      "type": "object",
      "properties": {
        "nextStartTime": {
          "type": "string",
          "format": "int64"
        },
        "nextEndTime": {
          "type": "string",
          "format": "int64"
        },
        "period": {
          "type": "string",
          "format": "int64"
        },
        "roundInterval": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "v1Node": {
      "type": "object",
      "properties": {
        "txid": {
          "type": "string"
        },
        "tx": {
          "type": "string"
        },
        "parentTxid": {
          "type": "string"
        },
        "level": {
          "type": "integer",
          "format": "int32"
        },
        "levelIndex": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "v1Output": {
      "type": "object",
      "properties": {
        "address": {
          "type": "string",
          "title": "onchain or off-chain"
        },
        "amount": {
          "type": "string",
          "format": "uint64",
          "description": "Amount to send in satoshis."
        }
      }
    },
    "v1RegisterBlindedOutputsRequest": {
      "type": "object",
      "properties": {
        "blindedCred": {
          "type": "string"
        },
        "vtxos": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1Output"
          }
        }
      }
    },
    "v1RegisterBlindedOutputsResponse": {
      "type": "object",
      "properties": {
        "blindedCred": {
          "type": "string"
        }
      }
    },
    "v1RegisterIntentRequest": {
      "type": "object",
      "properties": {
        "tapscripts": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1Tapscripts"
          },
          "description": "Tapscripts aims to reveal the taproot tree of the unspent \u0026 unexpired VTXOs."
        },
        "bip322Signature": {
          "$ref": "#/definitions/v1Bip322Signature",
          "description": "The BIP322 signature contains the outpoints that are gonna be forfeit and the outputs to be added in the new tree."
        },
        "notes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "v1RegisterIntentResponse": {
      "type": "object",
      "properties": {
        "intentId": {
          "type": "string"
        }
      }
    },
    "v1SubmitCheckpointTxsRequest": {
      "type": "object",
      "properties": {
        "fullySignedCheckpointTxs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "v1SubmitCheckpointTxsResponse": {
      "type": "object",
      "properties": {
        "fullySignedTx": {
          "type": "string"
        }
      }
    },
    "v1SubmitSignedForfeitTxsRequest": {
      "type": "object",
      "properties": {
        "batchId": {
          "type": "string"
        },
        "signedForfeitTxs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Forfeit txs signed by the user."
        },
        "signedCommitmentTx": {
          "type": "string",
          "description": "The user has to sign also the commitment tx if he registerd a boarding UTXO."
        }
      }
    },
    "v1SubmitSignedForfeitTxsResponse": {
      "type": "object"
    },
    "v1SubmitTreeNoncesRequest": {
      "type": "object",
      "properties": {
        "batchId": {
          "type": "string"
        },
        "pubkey": {
          "type": "string"
        },
        "treeNonces": {
          "type": "string"
        }
      }
    },
    "v1SubmitTreeNoncesResponse": {
      "type": "object"
    },
    "v1SubmitTreeSignaturesRequest": {
      "type": "object",
      "properties": {
        "batchId": {
          "type": "string"
        },
        "pubkey": {
          "type": "string"
        },
        "treeSignatures": {
          "type": "string"
        }
      }
    },
    "v1SubmitTreeSignaturesResponse": {
      "type": "object"
    },
    "v1SubmitTxRequest": {
      "type": "object",
      "properties": {
        "partialSignedTx": {
          "type": "string"
        },
        "unsignedCheckpointTxs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "v1SubmitTxResponse": {
      "type": "object",
      "properties": {
        "partialSignedCheckpointTxs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "v1Tapscripts": {
      "type": "object",
      "properties": {
        "scripts": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "v1TreeNoncesAggregatedEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "treeNonces": {
          "type": "string"
        }
      }
    },
    "v1TreeSigningStartedEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "signerPubkey": {
          "type": "string"
        },
        "cosignersPubkeys": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "unsignedCommitmentTx": {
          "type": "string"
        }
      }
    }
  }
}
